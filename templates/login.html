{% extends 'layout.html' %}

{% block content %}
<!-- Main Container with Gradient Background -->
<div class="min-vh-100" style="background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);">

    <!-- Hero Section -->
    <div class="container-fluid">
        <div class="row justify-content-center">
            <div class="col-xl-10 col-lg-11">

                <!-- App Introduction Hero -->
                <div class="text-center text-white py-5">
                    <div class="mb-4">
                        <i class="fas fa-heartbeat" style="font-size: 4rem; opacity: 0.9;"></i>
                    </div>
                    <h1 class="fw-bold mb-3" style="font-size: 2.5rem;">VitaSync</h1>
                    <p class="lead mb-4" style="font-size: 1.2rem; opacity: 0.9;">
                        Your Complete Health & Fitness Companion
                    </p>

                    <!-- Feature Highlights -->
                    <div class="row g-3 mb-5">
                        <div class="col-md-4">
                            <div class="feature-highlight">
                                <i class="fas fa-utensils mb-2" style="font-size: 2rem; opacity: 0.8;"></i>
                                <h6 class="fw-semibold">Smart Nutrition</h6>
                                <small style="opacity: 0.8;">Track calories, macros & create custom recipes</small>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="feature-highlight">
                                <i class="fas fa-dumbbell mb-2" style="font-size: 2rem; opacity: 0.8;"></i>
                                <h6 class="fw-semibold">Gym Progression</h6>
                                <small style="opacity: 0.8;">AI-powered workout tracking & progression</small>
                            </div>
                        </div>
                        <div class="col-md-4">
                            <div class="feature-highlight">
                                <i class="fas fa-chart-line mb-2" style="font-size: 2rem; opacity: 0.8;"></i>
                                <h6 class="fw-semibold">Analytics</h6>
                                <small style="opacity: 0.8;">Detailed insights & progress visualization</small>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Login Card -->
                <div class="row justify-content-center">
                    <div class="col-lg-5 col-md-7 col-sm-9">
                        <div class="card border-0 shadow-lg" style="border-radius: 20px; backdrop-filter: blur(10px);">
                            <div class="card-body p-4 p-md-5">

                                <!-- Login Header -->
                                <div class="text-center mb-4">
                                    <h3 class="fw-bold text-dark mb-2">Welcome Back</h3>
                                    <p class="text-muted mb-0">Sign in to continue your health journey</p>
                                </div>

                                <!-- Flash Messages -->
                                {% with messages = get_flashed_messages(with_categories=true) %}
                                    {% if messages %}
                                        {% for category, message in messages %}
                                            <div class="alert alert-{{ 'danger' if category == 'error' else category }} border-0 shadow-sm"
                                                 style="border-radius: 12px;" role="alert">
                                                <i class="fas fa-{{ 'exclamation-triangle' if category == 'error' else 'info-circle' }} me-2"></i>
                                                {{ message }}
                                                <button type="button" class="btn-close" data-bs-dismiss="alert" aria-label="Close"></button>
                                            </div>
                                        {% endfor %}
                                    {% endif %}
                                {% endwith %}

                                <!-- Login Form -->
                                <form method="POST" action="{{ url_for('login') }}" class="needs-validation" novalidate>

                                    <!-- Username Field -->
                                    <div class="mb-4">
                                        <label for="username" class="form-label fw-semibold text-dark">
                                            <i class="fas fa-user me-2 text-primary"></i>Username
                                        </label>
                                        <input type="text"
                                               class="form-control form-control-lg"
                                               id="username"
                                               name="username"
                                               placeholder="Enter your username"
                                               style="border-radius: 12px; border: 2px solid #e9ecef; padding: 0.75rem 1rem;"
                                               required>
                                        <div class="invalid-feedback">
                                            Please enter your username.
                                        </div>
                                    </div>

                                    <!-- Password Field -->
                                    <div class="mb-4">
                                        <label for="password" class="form-label fw-semibold text-dark">
                                            <i class="fas fa-lock me-2 text-primary"></i>Password
                                        </label>
                                        <div class="position-relative">
                                            <input type="password"
                                                   class="form-control form-control-lg"
                                                   id="password"
                                                   name="password"
                                                   placeholder="Enter your password"
                                                   style="border-radius: 12px; border: 2px solid #e9ecef; padding: 0.75rem 1rem; padding-right: 3rem;"
                                                   required>
                                            <button type="button"
                                                    class="btn position-absolute top-50 end-0 translate-middle-y me-2 p-0"
                                                    style="border: none; background: none; color: #6c757d;"
                                                    onclick="togglePassword()">
                                                <i class="fas fa-eye" id="toggleIcon"></i>
                                            </button>
                                        </div>
                                        <div class="invalid-feedback">
                                            Please enter your password.
                                        </div>
                                    </div>

                                    <!-- Login Button -->
                                    <div class="d-grid mb-4">
                                        <button type="submit"
                                                class="btn btn-lg fw-semibold"
                                                style="background: linear-gradient(135deg, #667eea, #764ba2);
                                                       color: white;
                                                       border: none;
                                                       padding: 0.875rem 1.5rem;
                                                       border-radius: 25px;
                                                       transition: all 0.3s ease;"
                                                onmouseover="this.style.transform='translateY(-2px)'; this.style.boxShadow='0 8px 25px rgba(102, 126, 234, 0.3)'"
                                                onmouseout="this.style.transform='translateY(0)'; this.style.boxShadow='0 4px 15px rgba(102, 126, 234, 0.2)'">
                                            <i class="fas fa-sign-in-alt me-2"></i>Sign In
                                        </button>
                                    </div>

                                    <!-- Demo Account Info -->
                                    <div class="text-center">
                                        <div class="alert alert-info border-0" style="border-radius: 12px; background: linear-gradient(135deg, #e3f2fd, #bbdefb);">
                                            <small class="text-dark">
                                                <i class="fas fa-info-circle me-2"></i>
                                                <strong>Demo Account:</strong> Use "demo" / "demo" to explore the app
                                            </small>
                                        </div>
                                    </div>

                                </form>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- App Benefits Section -->
                <div class="row justify-content-center mt-5 pb-5">
                    <div class="col-lg-10">
                        <div class="text-center text-white mb-4">
                            <h4 class="fw-bold mb-3">Why Choose VitaSync?</h4>
                        </div>

                        <div class="row g-4">
                            <!-- Benefit 1 -->
                            <div class="col-md-6 col-lg-3">
                                <div class="text-center text-white">
                                    <div class="benefit-icon mb-3">
                                        <i class="fas fa-brain" style="font-size: 2.5rem; opacity: 0.9;"></i>
                                    </div>
                                    <h6 class="fw-semibold mb-2">AI-Powered Insights</h6>
                                    <small style="opacity: 0.8;">
                                        Smart recommendations based on your progress and goals
                                    </small>
                                </div>
                            </div>

                            <!-- Benefit 2 -->
                            <div class="col-md-6 col-lg-3">
                                <div class="text-center text-white">
                                    <div class="benefit-icon mb-3">
                                        <i class="fas fa-mobile-alt" style="font-size: 2.5rem; opacity: 0.9;"></i>
                                    </div>
                                    <h6 class="fw-semibold mb-2">Mobile Optimized</h6>
                                    <small style="opacity: 0.8;">
                                        Perfect experience on any device, anywhere you go
                                    </small>
                                </div>
                            </div>

                            <!-- Benefit 3 -->
                            <div class="col-md-6 col-lg-3">
                                <div class="text-center text-white">
                                    <div class="benefit-icon mb-3">
                                        <i class="fas fa-shield-alt" style="font-size: 2.5rem; opacity: 0.9;"></i>
                                    </div>
                                    <h6 class="fw-semibold mb-2">Privacy First</h6>
                                    <small style="opacity: 0.8;">
                                        Your health data stays secure and private
                                    </small>
                                </div>
                            </div>

                            <!-- Benefit 4 -->
                            <div class="col-md-6 col-lg-3">
                                <div class="text-center text-white">
                                    <div class="benefit-icon mb-3">
                                        <i class="fas fa-rocket" style="font-size: 2.5rem; opacity: 0.9;"></i>
                                    </div>
                                    <h6 class="fw-semibold mb-2">Fast & Reliable</h6>
                                    <small style="opacity: 0.8;">
                                        Lightning-fast performance with offline capabilities
                                    </small>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>
        </div>
    </div>
</div>

<!-- Custom Styles -->
<style>
    /* Form Focus Effects */
    .form-control:focus {
        border-color: #667eea !important;
        box-shadow: 0 4px 20px rgba(102, 126, 234, 0.2) !important;
        transform: translateY(-1px);
        transition: all 0.3s ease;
    }

    /* Feature Highlights */
    .feature-highlight {
        padding: 1rem;
        transition: all 0.3s ease;
    }

    .feature-highlight:hover {
        transform: translateY(-3px);
    }

    /* Benefit Icons */
    .benefit-icon {
        transition: all 0.3s ease;
    }

    .benefit-icon:hover {
        transform: scale(1.1);
    }

    /* Mobile Optimizations */
    @media (max-width: 768px) {
        .min-vh-100 {
            padding: 1rem 0;
        }

        h1 {
            font-size: 2rem !important;
        }

        .lead {
            font-size: 1rem !important;
        }

        .card-body {
            padding: 2rem 1.5rem !important;
        }
    }

    /* Form Validation */
    .was-validated .form-control:valid {
        border-color: #28a745;
        background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 8 8'%3e%3cpath fill='%2328a745' d='m2.3 6.73.94-.94 1.44 1.44L7.4 4.5l.94.94L4.66 9.2z'/%3e%3c/svg%3e");
    }
</style>

<!-- JavaScript for Password Toggle and Form Validation -->
<script>
    // Password Toggle
    function togglePassword() {
        const passwordField = document.getElementById('password');
        const toggleIcon = document.getElementById('toggleIcon');

        if (passwordField.type === 'password') {
            passwordField.type = 'text';
            toggleIcon.classList.remove('fa-eye');
            toggleIcon.classList.add('fa-eye-slash');
        } else {
            passwordField.type = 'password';
            toggleIcon.classList.remove('fa-eye-slash');
            toggleIcon.classList.add('fa-eye');
        }
    }

    // Form Validation
    (function() {
        'use strict';
        window.addEventListener('load', function() {
            const forms = document.getElementsByClassName('needs-validation');
            const validation = Array.prototype.filter.call(forms, function(form) {
                form.addEventListener('submit', function(event) {
                    if (form.checkValidity() === false) {
                        event.preventDefault();
                        event.stopPropagation();
                    }
                    form.classList.add('was-validated');
                }, false);
            });
        }, false);
    })();

    // Add loading state to login button
    document.querySelector('form').addEventListener('submit', function(e) {
        const submitBtn = this.querySelector('button[type="submit"]');
        const originalText = submitBtn.innerHTML;

        if (this.checkValidity()) {
            submitBtn.innerHTML = '<i class="fas fa-spinner fa-spin me-2"></i>Signing In...';
            submitBtn.disabled = true;

            // Re-enable button after 5 seconds as fallback
            setTimeout(() => {
                submitBtn.innerHTML = originalText;
                submitBtn.disabled = false;
            }, 5000);
        }
    });
</script>

{% endblock %}
